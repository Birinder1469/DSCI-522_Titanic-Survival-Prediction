
# Predictors of Survival for Titanic Passengers

Team members:  
Alden Chen (aldenchen)  
Birinder Singh (birinder1469)    

## Question
What are the two strongest predictors of survival for Titanic passengers?

## Analysis

The target variable for the analysis is Survived, a dummy variable that takes the value 0 if the passenger did not survive and
1 if he or she did survive. We have data on 712 passengers for these seven features :

|Feature	           |Description	                                    | Type of Variable |
|--------------------|-------------------------------------------------|-----------------|
|Passenger Class	   |First, Second or Third Class | Categorical |
|Sex	               |Male or Female |    Categorical |
|Age                 |Age of each passenger years	| Numeric |
|Siblings/Spouses	   |Number of siblings and spouses aboard the Titanic | Integer|
|Parents/Children	   |Number of parents and children aboard the Titanic | Integer|
|Fare	               |The amount each passenger paid for a his or her ticket | Numeric |
|Port of Embarkation |Cherbourg, Queenstown, or Southampton |  Categorical | 

We perform some exploratory data analysis to visualize the relationships between different features and the chances of survival. To find the optimal tree, we use 5-fold cross validation to find the optimal depth decision tree. We fit a decision tree with this depth and use the `feature_importances_` attribute to determine which two features are the best predictors of survival. We conclude that the two best predictors of survival for Titanic passengers are sex and passenger class.

## Usage

This analysis uses 4 scripts which need to be run in the following order to execute the analysis:

1. `cleaning.R`, a script to load and clean the data
2. `eda.R`, a script that produces some plots for exploratory data analysis
3. `hyperparameter-tuning.py`, a script that performs 5-fold cross validation to find the best depth for the decision tree, including a plot of the validation performance for different depths
4. `fit-decision-tree.py`, a script that fits a depth-3  decision tree and produces a plot of the `feature_importances_`



To execute this analysis, clone this repository and navigate to the root of this project.  

To run the complete analysis using Docker and Make, use the following command in the shell. This opens a Docker container and executes the entire analysis inside of the container. 
```
docker run -e PASSWORD=<your-password> -v <file-path-to-project-root>:/titanic aldenchen/dsci-522_titanic-survival-prediction make -C /titanic all
```

Use the command below to remove the files generated by the analysis from the Docker container.  
```
docker run -e PASSWORD=<your-password> -v <file-path-to-project-root>:/titanic aldenchen/dsci-522_titanic-survival-prediction make -C /titanic clean
```

You can also run the analysis locally using Make without a Docker container by running the following command. Check the dependancies listed at the bottom of this README and make sure they are installed if you choose to run the analysis without Docker. 
```
make all
```

To remove files generated by the analysis, use the following command.  
```
make clean
```


The final output is a report in pdf format called `report_titanic-predictors.pdf`. This can be found in the `doc` directory. <br><br><br>




Below is a flowchart with details regarding the inputs and outputs for each script

![Execution workflow](doc/Execution_workflow.png)


## Dependencies

This analysis was developed using R version 3.5.1  and Python 3.6.5. It also uses Docker and Make to automate the analysis.  

The following packages are used in the scripts.  


| R  v3.5.1   | Python  v3.6.5  |
| :------------- | :------------- |
|  `tidyverse v1.2.1`       |` pandas  v0.23.0`    |
|   `png v0.1.7`   |`` numpy  v1.14.3``     |
|  `gridExtra v2.3`   |`` sci-kit-learn  v0.19.1``   |
|        | `argparse v3.2`      |
|       | `graphviz v0.10.1`    |
|       | `matplotlib v2.2.2`       |
|        | `seaborn v0.9.0 `     |
